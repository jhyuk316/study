# 1. 이벤트 기반 마이크로서비스란?

- [1. 이벤트 기반 마이크로서비스란?](#1-이벤트-기반-마이크로서비스란)
  - [1.1. 이벤트 기반 마이크로 서비스](#11-이벤트-기반-마이크로-서비스)
  - [1.2. 도메인 주도 설계와 경계 콘텍스트](#12-도메인-주도-설계와-경계-콘텍스트)
    - [비즈니스 요건에 따라 경계 콘텍스트 조정](#비즈니스-요건에-따라-경계-콘텍스트-조정)
  - [1.3. 통신 구조](#13-통신-구조)
    - [콘웨이의 법칙과 통신 구조](#콘웨이의-법칙과-통신-구조)
  - [1.4. 기존 컴퓨팅의 통신 구조](#14-기존-컴퓨팅의-통신-구조)
  - [1.5. 이벤트 기반 통신 구조](#15-이벤트-기반-통신-구조)
  - [1.6. 비동기식 이벤트 기반 마이크로서비스](#16-비동기식-이벤트-기반-마이크로서비스)
  - [1.7. 동기식 마이크로서비스](#17-동기식-마이크로서비스)
    - [장점](#장점)

## 1.1. 이벤트 기반 마이크로 서비스

- 시스템이 이벤트를 생산/소비하는 식으로 서로 통신

## 1.2. 도메인 주도 설계와 경계 콘텍스트

- 도메인

  - 솔루션을 제공하는 Problem space 와 관련된 모든 것, 비즈니스 존재 여부와 무관
  - 하위 도메인으로 구성

- 하위 도메인

  - 도메인을 이루는 컴포넌트, 비즈니스 조직 구조를 반영.
  - 독립적인 서비스가 될 때까지 분할

- 도메인 모델 - 솔루션 공간의 일부로 비즈니스가 문제를 해결하기 위해 사용하는 Construct

- 경계 콘텍스트
  - 입력, 출력, 이벤트, 요건, 프로세스, 데이터 모델등 하위 도메인과 연관된 논리적 경계.
  - 콘텍스트 내부 기능은 집약적이고 깊이 연관되어 있어야 하며, 내부에서만 일어야 함.
  - 경계 콘텍스트 끼리는 느슨하게 결합되어 있어야 함. 이웃 컨텍스트에 영향을 주지 않아야 함.
  - 하위 도메인을 중심으로 형성됨.

### 비즈니스 요건에 따라 경계 콘텍스트 조정

- 비즈니스에 요건에 따라 팀을 나눠야 함.
- 팀 간의 의존선을 타파해야 시스템 변경 민감도를 낮출 수 있음.

## 1.3. 통신 구조

- 비즈니스 통신구조 - 팀과 부서간의 통신을 결정, 각 팀에 할당된 주된 요건 및 채임에 따라 달라짐.

- 구현 통신 구조 - 하위 도메인 모델에 대해 조직에서 규정한 데이터와 로직을 이용해 신속하고 효율적인 업무 수행을 위해 비즈니스 프로세스, 데이터 구조, 시스템 설계를 정규화한 것.

- 데이터 통신 구조 - 비즈니스 전반에 걸쳐 구현체 간에 데이터를 주고받는 프로세스

### 콘웨이의 법칙과 통신 구조

> 시스템 구조는 그 시스템을 설계하는 조직의 통신 구조를 그대로 따라갈 수 밖에 없다.

## 1.4. 기존 컴퓨팅의 통신 구조

- 1. 서비스를 새로 만듦
- 2. 기존 서비스에 추가

- 장단점
  - 1의 단점 - 다른 시스템의 데이터에 접근하기 어려움, 새로운 서비스의 오버헤드가 큼
  - 2의 단점 - 분할이 어려움. 통신 구조 확장 비용이 많이 듬. 점점 더 생산성 지연 요소가 많아짐.

## 1.5. 이벤트 기반 통신 구조

- 이벤트 기반 통신은 기존 구현/데이터 통신 구조의 대안
- 요청-응답 API에 얽매이는 일 없이 이벤트 스트림 내부 이벤트 데이터를 매개로 소통

- 이벤트는 통신의 근간 - 이벤트가 곧 데이터
- 이벤트 스트림은 단일 진실 공급원
- 컨슈머가 스스로 모델링과 쿼리를 수행
- 조직 전반적으로 데이터 통신이 원활해짐 - 데이터 통신 구조를 정규화하고 느슨한 결합과 높은 응집도 달성
- 접근간으한 데이터 덕분에 비즈니스 통신 변경이 가능

## 1.6. 비동기식 이벤트 기반 마이크로서비스

- 세분성 - 서비스가 경계 콘텍스트에 알맞게 매핑되고 비즈니스 요건이 바뀌어도 쉽게 재작성 가능
- 확장성 - 개별 서비스는 필요시 규모를 늘리거나 줄일 수 있음
- 기술 유연성
- 비즈니스 유연성
- 느슨한 결합
- 지속적 전달 지원
- 우수한 시험성

## 1.7. 동기식 마이크로서비스

- 점대점 결합 - 다른 서비스에 의존해야 함.
- 의존적 확장 - 한 서비스에 의존적이면 부하가 몰림.
- 서비스 실패처리 - 의존하는 서비스가 죽으면 예외처리가 필요함.
- API 버저닝과 디펜던시 관리 - API 변경이 힘듬
- 데이터 접근이 구현체에 종속
- 분산 모놀리스 - 분산된 서비스간의 호출이 얶혀버려 결국 코드 라인이 물려 경게 콘텍스트가 희미해짐
- 테스트 - 다른 서비스 없이 테스트하기 힘듬.

### 장점

- A/B 테스트가 쉬움. 버전이 다른 API로 가능
- 추적이 쉬움. 어느 시스템이 호출 했는지 따라 가면 됨.
- 익숙함
